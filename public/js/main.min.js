"use strict";var brief={};function toggleClass(e,t){var n=e.className,t=-1<n.split(" ").indexOf(t)?n.replace(new RegExp("\\b"+t+"\\b","g"),""):n+" "+t;e.className=t.trim()}function updateSelections(){for(var e,t,n=document.querySelectorAll('.options input[type="radio"]'),o=0;o<n.length;o++)n[o].checked?(n[o].parentElement.classList.add("selected"),e=n[o].name,t=n[o].parentElement.querySelector("label p").innerHTML.trim(),document.getElementById(e+"-value").innerHTML=t):n[o].parentElement.classList.remove("selected")}function getOptions(){var e=[],t=document.querySelectorAll('.options input[type="radio"]');if(0<document.querySelectorAll('.options input[type="radio"]:checked').length){for(var n,o=0;o<t.length;o++)t[o].checked&&(n=t[o].value,e.push(n));return e}alert("Select Something")}function setLoading(e){var t=document.getElementById("gen-btn"),n=document.querySelector(".brief");t.value=e?"Generating...":"Generate",e?(t.classList.add("loading"),n.classList.add("loading")):(t.classList.remove("loading"),n.classList.remove("loading"))}function renderBrief(e){var t=document.getElementById("name-label"),n=document.getElementById("brief-name"),o=document.getElementById("brief-desc"),r=document.getElementById("brief-job"),i=document.getElementById("brief-deadline");e.name?(t.classList.remove("hidden"),n.innerHTML=e.name):(t.classList.add("hidden"),n.innerHTML=""),o.innerHTML=e.desc,r.innerHTML=e.job,i.innerHTML=e.deadline}function generateBrief(){setLoading(!0);var e=getOptions();localStorage.briefoptions=JSON.stringify(e),fetch("/brief",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({job:e[0],industry:e[1]})}).then(function(e){return e.json()}).then(function(e){setLoading(!1),renderBrief(window.brief=e)})}function changeTheme(){"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.theme="light",document.querySelector("html").classList.remove("dark")):(localStorage.theme="dark",document.querySelector("html").classList.add("dark"))}function exportBrief(){document.querySelector(".export-label").classList.add("hidden"),document.querySelector(".export-loading").classList.remove("hidden"),fetch("/export",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({brief:window.brief})}).then(function(e){return e.arrayBuffer().then(function(e){document.querySelector(".export-label").classList.remove("hidden"),document.querySelector(".export-loading").classList.add("hidden");var t=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(t),e=document.createElement("a");e.href=n,e.download="brief";t=function e(){var t=this;setTimeout(function(){URL.revokeObjectURL(n),t.removeEventListener("click",e),t.remove},500)};e.addEventListener("click",t,!1),e.click()})})}document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll('.options input[type="radio"]'),t=localStorage.briefoptions?JSON.parse(localStorage.briefoptions):["logo","tech"],n=0;n<e.length;n++)t.includes(e[n].value)&&e[n].setAttribute("checked","checked");updateSelections(),document.querySelector(".option.job").addEventListener("click",updateSelections,!1),document.querySelector(".option.industry").addEventListener("click",updateSelections,!1),document.querySelector(".job .option-bar").addEventListener("click",function(){toggleClass(document.querySelector(".job section"),"collapsed"),document.querySelector(".industry section").classList.add("collapsed")},!1),document.querySelector(".industry .option-bar").addEventListener("click",function(){toggleClass(document.querySelector(".industry section"),"collapsed"),document.querySelector(".job section").classList.add("collapsed")},!1),generateBrief()},!1);