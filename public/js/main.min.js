"use strict";var brief={};function toggleClass(e,t){var o=e.className,t=-1<o.split(" ").indexOf(t)?o.replace(new RegExp("\\b"+t+"\\b","g"),""):o+" "+t;e.className=t.trim()}function updateSelections(){for(var e,t,o=document.querySelectorAll('.options input[type="radio"]'),n=0;n<o.length;n++)o[n].checked?(o[n].parentElement.classList.add("selected"),e=o[n].name,t=o[n].parentElement.querySelector("label p").innerHTML.trim(),document.getElementById(e+"-value").innerHTML=t):o[n].parentElement.classList.remove("selected")}function getOptions(){var e=[],t=document.querySelectorAll('.options input[type="radio"]');if(0<document.querySelectorAll('.options input[type="radio"]:checked').length){for(var o,n=0;n<t.length;n++)t[n].checked&&(o=t[n].value,e.push(o));return e}alert("Select Something")}function setLoading(t){var e=document.querySelectorAll(".gen-btn"),o=document.querySelector(".brief");e.forEach(function(e){e.value=t?"Generating...":"Generate"}),t?(e.forEach(function(e){e.classList.add("loading")}),o.classList.add("loading")):(e.forEach(function(e){e.classList.remove("loading")}),o.classList.remove("loading"))}function renderBrief(e){var t=document.getElementById("name-label"),o=document.getElementById("brief-name"),n=document.getElementById("brief-desc"),r=document.getElementById("brief-job"),c=document.getElementById("brief-deadline");e.name?(t.classList.remove("hidden"),o.innerHTML=e.name):(t.classList.add("hidden"),o.innerHTML=""),n.innerHTML=e.desc,r.innerHTML=e.job,c.innerHTML=e.deadline}function generateBrief(){setLoading(!0);var e=getOptions();localStorage.briefoptions=JSON.stringify(e),fetch("/brief",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({job:e[0],industry:e[1]})}).then(function(e){return e.json()}).then(function(e){setLoading(!1),renderBrief(window.brief=e)})}function changeTheme(){"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.theme="light",document.querySelector("html").classList.remove("dark")):(localStorage.theme="dark",document.querySelector("html").classList.add("dark"))}function showExportOptions(){document.querySelector(".export").classList.add("hidden"),document.querySelector(".export-img").classList.remove("hidden"),document.querySelector(".export-pdf").classList.remove("hidden")}function exportBrief(n){document.querySelector(".export-img").classList.add("hidden"),document.querySelector(".export-pdf").classList.add("hidden"),document.querySelector(".export-loading").classList.remove("hidden"),fetch("/export",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({brief:window.brief,format:n})}).then(function(e){return e.arrayBuffer().then(function(e){document.querySelector(".export-img").classList.remove("hidden"),document.querySelector(".export-pdf").classList.remove("hidden"),document.querySelector(".export-loading").classList.add("hidden");var t=new Blob([e],{type:"pdf"===n?"application/pdf":"image/png"}),o=URL.createObjectURL(t),e=document.createElement("a");e.href=o,e.download="goodbrief";t=function e(){var t=this;setTimeout(function(){URL.revokeObjectURL(o),t.removeEventListener("click",e),t.remove},500)};e.addEventListener("click",t,!1),e.click()})})}window.onload=function(e){document.querySelector("body").classList.remove("preload")},document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll('.options input[type="radio"]'),t=localStorage.briefoptions?JSON.parse(localStorage.briefoptions):["logo","tech"],o=0;o<e.length;o++)t.includes(e[o].value)&&e[o].setAttribute("checked","checked");updateSelections(),document.querySelector(".option.job").addEventListener("click",updateSelections,!1),document.querySelector(".option.industry").addEventListener("click",updateSelections,!1),document.querySelector(".job .option-bar").addEventListener("click",function(){toggleClass(document.querySelector(".job section"),"collapsed"),document.querySelector(".industry section").classList.add("collapsed")},!1),document.querySelector(".industry .option-bar").addEventListener("click",function(){toggleClass(document.querySelector(".industry section"),"collapsed"),document.querySelector(".job section").classList.add("collapsed")},!1),generateBrief()},!1);